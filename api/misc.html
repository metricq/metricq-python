<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Miscellaneous &mdash; MetricQ  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/typehints.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Metric Metadata" href="../metadata.html" />
    <link rel="prev" title="Exceptions" href="exceptions.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> MetricQ
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../howto/index.html">How to use this library</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="sink.html">Sink</a></li>
<li class="toctree-l2"><a class="reference internal" href="source.html">Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="history-client.html">History Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="drain.html">Drain</a></li>
<li class="toctree-l2"><a class="reference internal" href="subscriber.html">Subscriber</a></li>
<li class="toctree-l2"><a class="reference internal" href="client-common.html">Common client operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="exceptions.html">Exceptions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Miscellaneous</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#timestamps">Timestamps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#timedeltas-durations">Timedeltas (Durations)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#time-value-pairs-and-aggregates">Time-value pairs and aggregates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rpc-handling">RPC handling</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../metadata.html">Metric Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrading.html">Upgrading <code class="docutils literal notranslate"><span class="pre">metricq</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MetricQ</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">API Reference</a> &raquo;</li>
      <li>Miscellaneous</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api/misc.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="miscellaneous">
<h1>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline"></a></h1>
<section id="timestamps">
<h2>Timestamps<a class="headerlink" href="#timestamps" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="metricq.Timestamp">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">metricq.</span></span><span class="sig-name descname"><span class="pre">Timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nanoseconds</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timestamp" title="Permalink to this definition"></a></dt>
<dd><p>A MetricQ Timestamp</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>nanoseconds</strong> : <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></dt><dd><p>number of nanoseconds elapsed since the UNIX epoch</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="metricq.Timestamp.__add__">
<span class="sig-name descname"><span class="pre">__add__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delta</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timestamp.__add__" title="Permalink to this definition"></a></dt>
<dd><p>Return the timestamp <cite>delta</cite> in the future (or in the past, if <cite>delta</cite> is negative), relative to a <a class="reference internal" href="#metricq.Timestamp" title="metricq.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> instance.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">epoch</span> <span class="o">=</span> <span class="n">Timestamp</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_week_later</span> <span class="o">=</span> <span class="n">epoch</span> <span class="o">+</span> <span class="n">Timedelta</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="s2">&quot;7 days&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">a_week_later</span><span class="p">)</span>
<span class="go">&#39;[604800000000000] 1970-01-08 01:00:00+01:00&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>delta</strong> : <a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a></dt><dd><p>a time duration, possibly negative</p>
</dd>
</dl>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#metricq.Timestamp" title="metricq.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><a class="reference internal" href="#metricq.Timestamp" title="metricq.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metricq.Timestamp.__eq__">
<span class="sig-name descname"><span class="pre">__eq__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timestamp.__eq__" title="Permalink to this definition"></a></dt>
<dd><p>Check whether two <a class="reference internal" href="#metricq.Timestamp" title="metricq.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamps</span></code></a> refer to the same instance of time:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">now</span> <span class="o">=</span> <span class="n">Timestamp</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">later</span> <span class="o">=</span> <span class="n">now</span> <span class="o">+</span> <span class="n">Timedelta</span><span class="o">.</span><span class="n">from_s</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">now</span> <span class="o">==</span> <span class="n">later</span>
<span class="go">False</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>other</strong> : <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></dt><dd><p>another timestamp</p>
</dd>
</dl>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metricq.Timestamp.__lt__">
<span class="sig-name descname"><span class="pre">__lt__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timestamp.__lt__" title="Permalink to this definition"></a></dt>
<dd><p>Compare whether this timestamp describes a time before another timestamp.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">now</span> <span class="o">=</span> <span class="n">Timestamp</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">later</span> <span class="o">=</span> <span class="n">now</span> <span class="o">+</span> <span class="n">Timedelta</span><span class="o">.</span><span class="n">from_s</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">now</span> <span class="o">&lt;</span> <span class="n">later</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Together with <a class="reference internal" href="#metricq.Timestamp.__eq__" title="metricq.Timestamp.__eq__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__eq__()</span></code></a>, all relational operations (<code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>, etc.) are supported.
Timestamps are <cite>totally ordered</cite> (as supplied by <a class="reference external" href="https://docs.python.org/3/library/functools.html#functools.total_ordering" title="(in Python v3.11)"><code class="docutils literal notranslate"><span class="pre">functools.total_ordering()</span></code></a>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>other</strong> : <a class="reference internal" href="#metricq.Timestamp" title="metricq.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></dt><dd><p>another timestamp</p>
</dd>
</dl>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metricq.Timestamp.__str__">
<span class="sig-name descname"><span class="pre">__str__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timestamp.__str__" title="Permalink to this definition"></a></dt>
<dd><p>Yield a human-readable date-time string in the local timezone:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># in UTC+01:00, it was already 1 in the night when the UNIX epoch happened</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">Timestamp</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="go">&#39;[0] 1970-01-01 01:00:00+01:00&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metricq.Timestamp.ago">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">ago</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delta</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timestamp.ago" title="Permalink to this definition"></a></dt>
<dd><p>Return a timestamp <cite>delta</cite> in the past.</p>
<p>This is equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Timestamp</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">delta</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>delta</strong> : <a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a></dt><dd><p>the time difference to now</p>
</dd>
</dl>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#metricq.Timestamp" title="metricq.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="metricq.Timestamp.datetime">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">datetime</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.11)"><span class="pre">datetime.datetime</span></a></em><a class="headerlink" href="#metricq.Timestamp.datetime" title="Permalink to this definition"></a></dt>
<dd><p>Create an aware UTC datetime object</p>
<p>All MetricQ timestamps are POSIX timestamps, hence UTC.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metricq.Timestamp.from_datetime">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_datetime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dt</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timestamp.from_datetime" title="Permalink to this definition"></a></dt>
<dd><p>Create a Timestamp from an aware datetime object. If you have a naive
datetime object, consider using <a class="reference internal" href="#metricq.Timestamp.from_local_datetime" title="metricq.Timestamp.from_local_datetime"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_local_datetime()</span></code></a> instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#metricq.Timestamp" title="metricq.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metricq.Timestamp.from_iso8601">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_iso8601</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iso_string</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timestamp.from_iso8601" title="Permalink to this definition"></a></dt>
<dd><p>Create a Timestamp from a <cite>ISO 8601</cite> date-time string.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Timestamp</span><span class="o">.</span><span class="n">from_iso8601</span><span class="p">(</span><span class="s2">&quot;1970-01-01T00:00:00.0Z&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">Timestamp</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>This is a convenience method that parses the date-time string into a
<a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.11)"><code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code></a> using
<a class="reference external" href="https://dateutil.readthedocs.io/en/stable/parser.html#dateutil.parser.isoparse" title="(in dateutil v2.8.2)"><code class="docutils literal notranslate"><span class="pre">dateutil.parser.isoparse()</span></code></a>,
and then calls <a class="reference internal" href="#metricq.Timestamp.from_datetime" title="metricq.Timestamp.from_datetime"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_datetime()</span></code></a> to create a <a class="reference internal" href="#metricq.Timestamp" title="metricq.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> from that.</p>
<p>The provided <cite>iso_string</cite> must include timezone information. To parse
local time strings, you must convert them yourself and use
<a class="reference internal" href="#metricq.Timestamp.from_local_datetime" title="metricq.Timestamp.from_local_datetime"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_local_datetime()</span></code></a>. Or better yet, somehow create an aware
<a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.11)"><code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code></a> and use <a class="reference internal" href="#metricq.Timestamp.from_datetime" title="metricq.Timestamp.from_datetime"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_datetime()</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The parser only supports up to <em>6 sub-second digits</em>,
further digits are simply dropped.
If you need to parse timestamps with higher precision,
you need to convert the string to nanoseconds yourself.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>iso_string</strong> : <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></dt><dd><p>a date-time string in <cite>ISO 8601</cite> format including a
timezone specifier.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#metricq.Timestamp" title="metricq.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metricq.Timestamp.from_local_datetime">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_local_datetime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dt</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timestamp.from_local_datetime" title="Permalink to this definition"></a></dt>
<dd><p>Create a timestamp from a naive <a class="reference internal" href="#metricq.Timestamp.datetime" title="metricq.Timestamp.datetime"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a> object that uses the
local timezone.
If you have a proper aware object, use <a class="reference internal" href="#metricq.Timestamp.from_datetime" title="metricq.Timestamp.from_datetime"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_datetime()</span></code></a> instead.</p>
<p>This function uses <cite>dateutil.tz.gettz()</cite> which uses <cite>/etc/localtime</cite>.
Using naive datetime object can be errorprone. Naive local times are
ambiguous during daylight savings time adjustments.
If you have to use this function, your workflow is probably broken.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#metricq.Timestamp" title="metricq.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metricq.Timestamp.from_now">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_now</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delta</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timestamp.from_now" title="Permalink to this definition"></a></dt>
<dd><p>Return a timestamp <cite>delta</cite> in the future.</p>
<p>This is equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Timestamp</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="n">delta</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>delta</strong> : <a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a></dt><dd><p>the time difference to now</p>
</dd>
</dl>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#metricq.Timestamp" title="metricq.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metricq.Timestamp.from_posix_seconds">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_posix_seconds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seconds</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timestamp.from_posix_seconds" title="Permalink to this definition"></a></dt>
<dd><p>Create a Timestamp from a POSIX timestamp</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>seconds</strong> : <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></dt><dd><p>number of seconds since the UNIX epoch</p>
</dd>
</dl>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#metricq.Timestamp" title="metricq.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><a class="reference internal" href="#metricq.Timestamp" title="metricq.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metricq.Timestamp.now">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">now</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timestamp.now" title="Permalink to this definition"></a></dt>
<dd><p>Return a Timestamp corresponding to “now”</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#metricq.Timestamp" title="metricq.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#metricq.Timestamp" title="metricq.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="metricq.Timestamp.posix">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">posix</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#metricq.Timestamp.posix" title="Permalink to this definition"></a></dt>
<dd><p>Number of seconds since the UNIX epoch</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="metricq.Timestamp.posix_ms">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">posix_ms</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#metricq.Timestamp.posix_ms" title="Permalink to this definition"></a></dt>
<dd><p>Number of milliseconds since the UNIX epoch</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="metricq.Timestamp.posix_ns">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">posix_ns</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></em><a class="headerlink" href="#metricq.Timestamp.posix_ns" title="Permalink to this definition"></a></dt>
<dd><p>Number of nanoseconds since the UNIX epoch</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="metricq.Timestamp.posix_us">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">posix_us</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#metricq.Timestamp.posix_us" title="Permalink to this definition"></a></dt>
<dd><p>Number of microseconds since the UNIX epoch</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="timedeltas-durations">
<h2>Timedeltas (Durations)<a class="headerlink" href="#timedeltas-durations" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="metricq.Timedelta">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">metricq.</span></span><span class="sig-name descname"><span class="pre">Timedelta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nanoseconds</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timedelta" title="Permalink to this definition"></a></dt>
<dd><p>A (possibly negative) duration of time</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>nanoseconds</strong> : <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></dt><dd><p>duration in nanoseconds</p>
</dd>
</dl>
</dd>
</dl>
<dl>
<dt>Supported operations:</dt><dd><table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 31%" />
<col style="width: 57%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Types</p></th>
<th class="head"><p>Result</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">d1</span> <span class="pre">+</span> <span class="pre">d2</span></code></p></td>
<td><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">d1</span></code>, <code class="code docutils literal notranslate"><span class="pre">d2</span></code>: <a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a></p></li>
</ul>
</td>
<td><p>the sum of the duration of <code class="code docutils literal notranslate"><span class="pre">d1</span></code> and <code class="code docutils literal notranslate"><span class="pre">d2</span></code> as a <a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> object</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">d</span> <span class="pre">+</span> <span class="pre">dt</span></code></p></td>
<td><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">d</span></code>: <a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">dt</span></code>: <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><code class="docutils literal notranslate"><span class="pre">datetime.timedelta</span></code></a></p></li>
</ul>
</td>
<td><p>the combined duration of <code class="code docutils literal notranslate"><span class="pre">d</span></code> and
<code class="code docutils literal notranslate"><span class="pre">Timedelta.from_timedelta(dt)</span></code> as a <a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> object</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">d</span> <span class="pre">+</span> <span class="pre">t</span></code></p></td>
<td><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">d</span></code>: <a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">t</span></code>: <a class="reference internal" href="#metricq.Timestamp" title="metricq.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p></li>
</ul>
</td>
<td><p>a <a class="reference internal" href="#metricq.Timestamp" title="metricq.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> offset by duration <code class="code docutils literal notranslate"><span class="pre">d</span></code>
(the same as <code class="code docutils literal notranslate"><span class="pre">t</span> <span class="pre">+</span> <span class="pre">d</span></code>, see <a class="reference internal" href="#metricq.Timestamp.__add__" title="metricq.Timestamp.__add__"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp.__add__</span></code></a>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">d1</span> <span class="pre">==</span> <span class="pre">d2</span></code></p></td>
<td><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">d1</span></code>, <code class="code docutils literal notranslate"><span class="pre">d2</span></code>: <a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a></p></li>
</ul>
</td>
<td><p><code class="code docutils literal notranslate"><span class="pre">True</span></code> if <code class="code docutils literal notranslate"><span class="pre">d1</span></code> and <code class="code docutils literal notranslate"><span class="pre">d2</span></code> describe the same duration of time</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">d</span> <span class="pre">==</span> <span class="pre">dt</span></code></p></td>
<td><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">d</span></code>: <a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">dt</span></code>: <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><code class="docutils literal notranslate"><span class="pre">datetime.timedelta</span></code></a></p></li>
</ul>
</td>
<td><p><code class="code docutils literal notranslate"><span class="pre">True</span></code> if <code class="code docutils literal notranslate"><span class="pre">d.datetime</span> <span class="pre">==</span> <span class="pre">dt</span></code>
(see <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><code class="docutils literal notranslate"><span class="pre">datetime.timedelta</span></code></a>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">d1</span> <span class="pre">&lt;</span> <span class="pre">d2</span></code></p></td>
<td><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">d1</span></code>, <code class="code docutils literal notranslate"><span class="pre">d2</span></code>: <a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a></p></li>
</ul>
</td>
<td><p><code class="code docutils literal notranslate"><span class="pre">True</span></code> if <code class="code docutils literal notranslate"><span class="pre">d1</span></code> is shorter than <code class="code docutils literal notranslate"><span class="pre">d2</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">d</span> <span class="pre">&lt;</span> <span class="pre">dt</span></code></p></td>
<td><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">d</span></code>: <a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">dt</span></code>: <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><code class="docutils literal notranslate"><span class="pre">datetime.timedelta</span></code></a></p></li>
</ul>
</td>
<td><p><code class="code docutils literal notranslate"><span class="pre">True</span></code> if <code class="code docutils literal notranslate"><span class="pre">d.datetime</span> <span class="pre">&lt;</span> <span class="pre">dt</span></code>
(see <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><code class="docutils literal notranslate"><span class="pre">datetime.timedelta</span></code></a>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">d</span> <span class="pre">*</span> <span class="pre">c</span></code></p></td>
<td><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">d</span></code>: <a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">c</span></code>: <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p></li>
</ul>
</td>
<td><p>The duration scaled by the factor <code class="code docutils literal notranslate"><span class="pre">c</span></code>, truncated to nanosecond precision
See <a class="reference internal" href="#metricq.Timedelta.__mul__" title="metricq.Timedelta.__mul__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__mul__()</span></code></a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">d</span> <span class="pre">/</span> <span class="pre">c</span></code></p></td>
<td><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">d</span></code>: <a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">c</span></code>: <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></p></li>
</ul>
</td>
<td><p>The duration divided by <code class="code docutils literal notranslate"><span class="pre">c</span></code>, truncated to nanosecond precision.
See <a class="reference internal" href="#metricq.Timedelta.__truediv__" title="metricq.Timedelta.__truediv__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__truediv__()</span></code></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">d</span> <span class="pre">//</span> <span class="pre">n</span></code></p></td>
<td><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">d</span></code>: <a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">n</span></code>: <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p></li>
</ul>
</td>
<td><p>The duration divided by an <em>integer</em> factor <code class="code docutils literal notranslate"><span class="pre">n</span></code>, truncated to nanosecond precision.
See <a class="reference internal" href="#metricq.Timedelta.__floordiv__" title="metricq.Timedelta.__floordiv__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__floordiv__()</span></code></a>.</p></td>
</tr>
</tbody>
</table>
<p>In addition to <code class="code docutils literal notranslate"><span class="pre">&lt;</span></code> and <code class="code docutils literal notranslate"><span class="pre">=</span></code>, all other relational operations are supported and behave as you would expect.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="metricq.Timedelta.__floordiv__">
<span class="sig-name descname"><span class="pre">__floordiv__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">factor</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timedelta.__floordiv__" title="Permalink to this definition"></a></dt>
<dd><p>Divide a duration by an integer factor.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">td</span> <span class="o">=</span> <span class="n">Timedelta</span><span class="o">.</span><span class="n">from_s</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">//</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">td</span><span class="o">.</span><span class="n">s</span>
<span class="go">3.333333333</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">td</span><span class="o">.</span><span class="n">precise_string</span>
<span class="go">&#39;3333333333ns&#39;</span>
</pre></div>
</div>
<p>This divides the number of nanoseconds in this duration by <cite>factor</cite>
using <a class="reference external" href="https://www.python.org/dev/peps/pep-0238/#semantics-of-floor-division">Floor Division</a>,
i.e. for some <code class="code docutils literal notranslate"><span class="pre">n:</span> <span class="pre">int</span></code> and <code class="code docutils literal notranslate"><span class="pre">td:</span> <span class="pre">Timedelta</span></code> we have</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="p">(</span><span class="n">td</span> <span class="o">//</span> <span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">ns</span> <span class="o">==</span> <span class="n">td</span><span class="o">.</span><span class="n">ns</span> <span class="o">//</span> <span class="n">n</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Floor Division produces <em>surprising</em> results for <code class="code docutils literal notranslate"><span class="pre">float</span></code> arguments
(i.e. <code class="code docutils literal notranslate"><span class="pre">3</span> <span class="pre">//</span> <span class="pre">0.2</span> <span class="pre">==</span> <span class="pre">14.0</span></code>).
Use <a class="reference internal" href="#metricq.Timedelta.__truediv__" title="metricq.Timedelta.__truediv__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__truediv__()</span></code></a> if you want to scale a duration by a non-integer factor.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metricq.Timedelta.__mul__">
<span class="sig-name descname"><span class="pre">__mul__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">factor</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timedelta.__mul__" title="Permalink to this definition"></a></dt>
<dd><p>Scale a duration by a <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> factor.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metricq.Timedelta.__str__">
<span class="sig-name descname"><span class="pre">__str__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timedelta.__str__" title="Permalink to this definition"></a></dt>
<dd><p>A string containing the number of seconds of this duration</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="s2">&quot;One day has </span><span class="si">{}</span><span class="s2"> seconds&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Timedelta</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="s2">&quot;1 day&quot;</span><span class="p">))</span>
<span class="go">&#39;One day has 86400.0s seconds&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metricq.Timedelta.__truediv__">
<span class="sig-name descname"><span class="pre">__truediv__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">factor</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timedelta.__truediv__" title="Permalink to this definition"></a></dt>
<dd><p>Divide a duration by a (floating point) factor.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">Timedelta</span><span class="o">.</span><span class="n">from_s</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.5</span><span class="p">)</span><span class="o">.</span><span class="n">precise_string</span>
<span class="go">&#39;4s&#39;</span>
</pre></div>
</div>
<p>This divides the number of nanoseconds in this duration by <cite>factor</cite>
using <a class="reference external" href="https://www.python.org/dev/peps/pep-0238/#semantics-of-true-division">True Division</a>,
but truncates the result to an <code class="code docutils literal notranslate"><span class="pre">int</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="p">(</span><span class="n">td</span> <span class="o">/</span> <span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">ns</span> <span class="o">==</span> <span class="nb">int</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">ns</span> <span class="o">/</span> <span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="code docutils literal notranslate"><span class="pre">td:</span> <span class="pre">Timedelta</span></code> and <code class="code docutils literal notranslate"><span class="pre">x:</span> <span class="pre">float</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Use <a class="reference internal" href="#metricq.Timedelta.__floordiv__" title="metricq.Timedelta.__floordiv__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__floordiv__()</span></code></a> if you know that the factor is an integer,
this will prevent rounding errors.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metricq.Timedelta.from_ms">
<em class="property"><span class="pre">staticmethod</span> </em><span class="sig-name descname"><span class="pre">from_ms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">milliseconds</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timedelta.from_ms" title="Permalink to this definition"></a></dt>
<dd><p>Create a duration from a number of milliseconds</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>milliseconds</strong> : <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></dt><dd><p>number of milliseconds</p>
</dd>
</dl>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A <a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metricq.Timedelta.from_s">
<em class="property"><span class="pre">staticmethod</span> </em><span class="sig-name descname"><span class="pre">from_s</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seconds</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timedelta.from_s" title="Permalink to this definition"></a></dt>
<dd><p>Create a duration from a number of seconds</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>seconds</strong> : <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></dt><dd><p>number of seconds</p>
</dd>
</dl>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A <a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metricq.Timedelta.from_string">
<em class="property"><span class="pre">staticmethod</span> </em><span class="sig-name descname"><span class="pre">from_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">duration_str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timedelta.from_string" title="Permalink to this definition"></a></dt>
<dd><p>Parse a human-readable string representation of a duration.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="s2">&quot;One day has </span><span class="si">{}</span><span class="s2"> seconds&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Timedelta</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="s2">&quot;1 day&quot;</span><span class="p">))</span>
<span class="go">&#39;One day has 86400.0s seconds&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>duration_str</strong> : <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></dt><dd><p><p>A duration string in the form of “<cite>&lt;number&gt; &lt;unit&gt;</cite>”.
Accepted units are:</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 16%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>short</p></th>
<th class="head"><p>long</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Seconds</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;s&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;second&quot;</span></code>,      <code class="docutils literal notranslate"><span class="pre">&quot;seconds&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Milliseconds</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;ms&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;millisecond&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;milliseconds&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Microseconds</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;us&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;microsecond&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;microseconds&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Nanoseconds</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;ns&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;nanosecond&quot;</span></code>,  <code class="docutils literal notranslate"><span class="pre">&quot;nanoseconds&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Minutes</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;min&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;minute&quot;</span></code>,      <code class="docutils literal notranslate"><span class="pre">&quot;minutes&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Hours</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;h&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;hour&quot;</span></code>,        <code class="docutils literal notranslate"><span class="pre">&quot;hours&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Days</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;d&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;day&quot;</span></code>,         <code class="docutils literal notranslate"><span class="pre">&quot;days&quot;</span></code></p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</p>
</dd>
</dl>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The parsed <a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> object</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.11)"><strong>ValueError</strong></a> – if the string is not of the correct format or an invalid unit was specified</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metricq.Timedelta.from_timedelta">
<em class="property"><span class="pre">staticmethod</span> </em><span class="sig-name descname"><span class="pre">from_timedelta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delta</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timedelta.from_timedelta" title="Permalink to this definition"></a></dt>
<dd><p>Convert from a standard <code class="docutils literal notranslate"><span class="pre">timedelta</span></code> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>delta</strong> : <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">timedelta</span></code></a></dt><dd><p>a standard <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><code class="docutils literal notranslate"><span class="pre">datetime.timedelta</span></code></a> object</p>
</dd>
</dl>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A <a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metricq.Timedelta.from_us">
<em class="property"><span class="pre">staticmethod</span> </em><span class="sig-name descname"><span class="pre">from_us</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">microseconds</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.Timedelta.from_us" title="Permalink to this definition"></a></dt>
<dd><p>Create a duration from a number of microseconds</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>microseconds</strong> : <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></dt><dd><p>number of microseconds</p>
</dd>
</dl>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A <a class="reference internal" href="#metricq.Timedelta" title="metricq.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="metricq.Timedelta.ms">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ms</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#metricq.Timedelta.ms" title="Permalink to this definition"></a></dt>
<dd><p>Number of milliseconds in this duration</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="metricq.Timedelta.ns">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ns</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></em><a class="headerlink" href="#metricq.Timedelta.ns" title="Permalink to this definition"></a></dt>
<dd><p>Number of nanoseconds in this duration</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="metricq.Timedelta.s">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">s</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#metricq.Timedelta.s" title="Permalink to this definition"></a></dt>
<dd><p>Number of seconds in this duration</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="metricq.Timedelta.timedelta">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">timedelta</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><span class="pre">datetime.timedelta</span></a></em><a class="headerlink" href="#metricq.Timedelta.timedelta" title="Permalink to this definition"></a></dt>
<dd><p>This duration as a standard <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><code class="docutils literal notranslate"><span class="pre">datetime.timedelta</span></code></a> object</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">timedelta</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="metricq.Timedelta.us">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">us</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#metricq.Timedelta.us" title="Permalink to this definition"></a></dt>
<dd><p>Number of microseconds in this duration</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="time-value-pairs-and-aggregates">
<h2>Time-value pairs and aggregates<a class="headerlink" href="#time-value-pairs-and-aggregates" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="metricq.TimeValue">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">metricq.</span></span><span class="sig-name descname"><span class="pre">TimeValue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.TimeValue" title="Permalink to this definition"></a></dt>
<dd><p>A <cite>timestamp-value</cite> pair.</p>
<p>Unpack it like so:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tv</span> <span class="o">=</span> <span class="n">TimeValue</span><span class="p">(</span><span class="n">Timestamp</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span> <span class="mf">42.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="o">=</span> <span class="n">tv</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="metricq.TimeValue.dict">
<span class="sig-name descname"><span class="pre">dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#metricq.TimeValue.dict" title="Permalink to this definition"></a></dt>
<dd><p>returns a dict representing the TimeValue instance.
Keys are <cite>timestamp</cite> and <cite>value</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><span class="annotation terse">{<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>: <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>}</span><span class="annotation full"><a class="reference internal" href="#metricq.TimeValue.dict" title="metricq.TimeValue.dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</span></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="metricq.TimeValue.timestamp">
<span class="sig-name descname"><span class="pre">timestamp</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#metricq.Timestamp" title="metricq.types.Timestamp"><span class="pre">metricq.types.Timestamp</span></a></em><a class="headerlink" href="#metricq.TimeValue.timestamp" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="metricq.TimeValue.value">
<span class="sig-name descname"><span class="pre">value</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#metricq.TimeValue.value" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="metricq.TimeAggregate">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">metricq.</span></span><span class="sig-name descname"><span class="pre">TimeAggregate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minimum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maximum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">integral_ns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active_time</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.TimeAggregate" title="Permalink to this definition"></a></dt>
<dd><p>Summary of a metric’s values within a certain period of time.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="metricq.TimeAggregate.timestamp">
<span class="sig-name descname"><span class="pre">timestamp</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#metricq.Timestamp" title="metricq.types.Timestamp"><span class="pre">metricq.types.Timestamp</span></a></em><a class="headerlink" href="#metricq.TimeAggregate.timestamp" title="Permalink to this definition"></a></dt>
<dd><p>starting time of this aggregate</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="metricq.TimeAggregate.minimum">
<span class="sig-name descname"><span class="pre">minimum</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#metricq.TimeAggregate.minimum" title="Permalink to this definition"></a></dt>
<dd><p>minimum value</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="metricq.TimeAggregate.maximum">
<span class="sig-name descname"><span class="pre">maximum</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#metricq.TimeAggregate.maximum" title="Permalink to this definition"></a></dt>
<dd><p>maximum value</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="metricq.TimeAggregate.sum">
<span class="sig-name descname"><span class="pre">sum</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#metricq.TimeAggregate.sum" title="Permalink to this definition"></a></dt>
<dd><p>sum of all values</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="metricq.TimeAggregate.count">
<span class="sig-name descname"><span class="pre">count</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></em><a class="headerlink" href="#metricq.TimeAggregate.count" title="Permalink to this definition"></a></dt>
<dd><p>total number of values</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="metricq.TimeAggregate.integral_ns">
<span class="sig-name descname"><span class="pre">integral_ns</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#metricq.TimeAggregate.integral_ns" title="Permalink to this definition"></a></dt>
<dd><p>Integral of values in this aggregate over its active time, nanoseconds-based</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="metricq.TimeAggregate.active_time">
<span class="sig-name descname"><span class="pre">active_time</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#metricq.Timedelta" title="metricq.types.Timedelta"><span class="pre">metricq.types.Timedelta</span></a></em><a class="headerlink" href="#metricq.TimeAggregate.active_time" title="Permalink to this definition"></a></dt>
<dd><p>time spanned by this aggregate</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metricq.TimeAggregate.from_value_pair">
<em class="property"><span class="pre">staticmethod</span> </em><span class="sig-name descname"><span class="pre">from_value_pair</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp_before</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.TimeAggregate.from_value_pair" title="Permalink to this definition"></a></dt>
<dd><p>Create a TimeAggregate from a pair of timestamps (class:<cite>Timestamp</cite>) and one value</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="exceptions.html#metricq.exceptions.NonMonotonicTimestamps" title="metricq.exceptions.NonMonotonicTimestamps"><strong>NonMonotonicTimestamps</strong></a> – if the two timestamps are not strictly monotonic</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#metricq.TimeAggregate" title="metricq.TimeAggregate"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeAggregate</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="metricq.TimeAggregate.integral_s">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">integral_s</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#metricq.TimeAggregate.integral_s" title="Permalink to this definition"></a></dt>
<dd><p>Integral of values in this aggregate over its active time, seconds-based</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metricq.TimeAggregate.dict">
<span class="sig-name descname"><span class="pre">dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#metricq.TimeAggregate.dict" title="Permalink to this definition"></a></dt>
<dd><p>returns a dict representing the TimeAggregate instance.
Keys are <cite>timestamp</cite>, <cite>minimum</cite>, <cite>mean</cite>, <cite>maximum</cite>, and <cite>count</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><span class="annotation terse">{<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>: <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>}</span><span class="annotation full"><a class="reference internal" href="#metricq.TimeAggregate.dict" title="metricq.TimeAggregate.dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="rpc-handling">
<h2>RPC handling<a class="headerlink" href="#rpc-handling" title="Permalink to this headline"></a></h2>
<dl class="py decorator">
<dt class="sig sig-object py" id="metricq.rpc_handler">
<span class="sig-prename descclassname"><span class="pre">&#64;</span></span><span class="sig-prename descclassname"><span class="pre">metricq.</span></span><span class="sig-name descname"><span class="pre">rpc_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">function_tags</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#metricq.rpc_handler" title="Permalink to this definition"></a></dt>
<dd><p>A Decorator to mark an <code class="code docutils literal notranslate"><span class="pre">async</span></code> method as an RPC handler</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>function_tags</strong> : <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></dt><dd><p>The names of the RPCs that this method should handle</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">metricq</span> <span class="kn">import</span> <span class="n">Source</span><span class="p">,</span> <span class="n">rpc_handler</span>

<span class="k">class</span> <span class="nc">MySource</span><span class="p">(</span><span class="n">Source</span><span class="p">):</span>

    <span class="o">...</span>

    <span class="nd">@rpc_handler</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">on_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received configuration: </span><span class="si">{</span><span class="n">config</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="o">...</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This only has an effect on methods of classes implementing MetricQ clients (see <a class="reference internal" href="client-common.html#metricq.Client" title="metricq.Client"><code class="xref py py-class docutils literal notranslate"><span class="pre">Client</span></code></a>),
i.e. <a class="reference internal" href="sink.html#metricq.Sink" title="metricq.Sink"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sink</span></code></a>, <a class="reference internal" href="source.html#metricq.Source" title="metricq.Source"><code class="xref py py-class docutils literal notranslate"><span class="pre">Source</span></code></a>, <a class="reference internal" href="source.html#metricq.IntervalSource" title="metricq.IntervalSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalSource</span></code></a>, <a class="reference internal" href="history-client.html#metricq.HistoryClient" title="metricq.HistoryClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">HistoryClient</span></code></a>, etc.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><span class="annotation terse">((…) → <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>) → (…) → <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span><span class="annotation full"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code></a>[[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/constants.html#Ellipsis" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">...</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]]], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/constants.html#Ellipsis" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">...</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]]]</span></p>
</dd>
</dl>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="exceptions.html" class="btn btn-neutral float-left" title="Exceptions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../metadata.html" class="btn btn-neutral float-right" title="Metric Metadata" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, TU Dresden.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>